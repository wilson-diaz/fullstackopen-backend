{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Numbers.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","newFilter","handleNewFilterChange","value","onChange","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","addPerson","type","onClick","Numbers","personsToShow","handleDelete","map","p","name","number","id","Notification","isError","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","baseUrl","axios","get","then","response","data","newPerson","post","delete","put","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","setMessage","setIsError","useEffect","personService","initialPersons","filter","person","toLowerCase","indexOf","event","target","preventDefault","setTimeout","duplicate","find","window","confirm","catch","error","console","log","concat","nameToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.caa41cfa.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({newFilter, handleNewFilterChange}) => {\r\n    return (\r\n      <p>filter names by: <input value={newFilter} onChange={handleNewFilterChange} /></p>\r\n    )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({newName, handleNameChange, newNumber, handleNumberChange, addPerson}) => (\r\n    <form>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\" onClick={addPerson}>add</button>\r\n        </div>\r\n    </form>\r\n)\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Numbers = ({ personsToShow, handleDelete }) => (\r\n    <>\r\n        {personsToShow.map(p => (\r\n            <p key={p.id}>\r\n                {p.name} {p.number} \r\n                <button onClick={handleDelete(p.id)}>delete</button>\r\n            </p>\r\n        ))}\r\n    </>\r\n)\r\n\r\nexport default Numbers\r\n","import React from 'react'\r\n\r\nconst Notification = ({isError, message}) => {\r\n    // only render when necessary\r\n    if (!message) { return null; }\r\n\r\n    const style = {\r\n        color: isError ? 'red' : 'green',\r\n        background: 'lightgrey',\r\n        fontSize: 20,\r\n        borderStyle: 'solid',\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        marginBottom: 10\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{message}</div>\r\n    )\r\n}\r\n\r\nexport default Notification","import axios from \"axios\"\r\nconst baseUrl = \"/api/persons\"\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n        .then(response => response.data)\r\n}\r\n\r\nconst create = newPerson => {\r\n    return axios.post(baseUrl, newPerson)\r\n        .then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n        .then(response => response.data)\r\n}\r\n\r\nconst updatePhone = (id, newPerson) => {\r\n    return axios.put(`${baseUrl}/${id}`, newPerson)\r\n        .then(response => response.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    create,\r\n    deletePerson,\r\n    updatePhone\r\n}\r\n","import React, { useState, useEffect } from 'react'\n\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Numbers from './components/Numbers'\nimport Notification from './components/Notification'\n\nimport personService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n\n  const [message, setMessage] = useState(null)\n  const [isError, setIsError] = useState(false)\n\n  useEffect(() => {\n    personService.getAll()\n      .then(initialPersons => setPersons(initialPersons))\n  }, [])\n  \n  // filter using case-insensitive input\n  const personsToShow = newFilter === ''\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().indexOf(newFilter.toLowerCase()) !== -1)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    // check both fields\n    if (newName === '' || newNumber === '') {\n      setMessage(`please fill in both fields`)\n      setIsError(true)\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n      return\n    }\n\n    // check uniqueness\n    const duplicate = persons.find(p => p.name === newName)\n    if (duplicate) {\n      if (duplicate.number !== newNumber) {\n        if (window.confirm(`${newName} has already been added with a different number, would you like to replace their phone number?`)) {\n          personService.updatePhone(duplicate.id, {...duplicate, number: newNumber})  \n            .then(data => {\n              setPersons(persons.map(p => p.id !== duplicate.id ? p : data))\n\n              setMessage(`successfully updated ${newName}'s number to ${newNumber}`)\n              setIsError(false)\n              setTimeout(() => {\n                setMessage(null)\n              }, 5000)\n            })\n            .catch(error => {\n              console.log(error.response.data)\n              setMessage(error.response.data.error)\n              setIsError(true)\n              setTimeout(() => {\n                setMessage(null)\n              }, 5000)\n              setPersons(persons.filter(p => p !== duplicate.id))\n            })\n        } else {\n          // don't replace number\n          return\n        }\n      } else {\n        setMessage(`${newName} has already been added with this number. enter a different one to update it.`)\n        setIsError(true)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        return\n      }\n    } else {\n        const newPerson = {\n          name: newName,\n          number: newNumber\n        }\n    \n        personService\n          .create(newPerson)\n          .then(data => setPersons(persons.concat(data)))\n          .catch(error => {\n            console.log(error.response.data)\n            setMessage(error.response.data.error)\n          })\n        \n        setMessage(`successfully added ${newName}`)\n        setIsError(false)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleDelete = (id) => () => {\n    if (!window.confirm(\"are you sure you want to delete this person?\")) { return }\n\n    const nameToDelete = persons.find(p => p.id === id).name\n\n    personService\n      .deletePerson(id)\n      .then(response => {\n        setMessage(`successfully deleted ${nameToDelete}`)\n        setIsError(false)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        setMessage(error.response.data.error)\n        setIsError(true)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n\n    setPersons(persons.filter(p => p.id !== id))\n  }\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleNewFilterChange = (event) => setNewFilter(event.target.value)\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification isError={isError} message={message} />\n      <Filter newFilter={newFilter} handleNewFilterChange={handleNewFilterChange} />\n      \n      <h2>Add new person</h2>\n      <PersonForm newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} addPerson={addPerson} />\n\n      <h2>Numbers</h2>\n      <Numbers personsToShow={personsToShow} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}